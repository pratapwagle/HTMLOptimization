/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: #333;
    background-color: #f5f5f5;
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
}

/* Header Styles */
.header {
    text-align: center;
    margin-bottom: 2rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.header h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    font-weight: 700;
}

.header p {
    font-size: 1.2rem;
    opacity: 0.9;
}

/* URL Input Section */
.url-input-section {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    margin-bottom: 2rem;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.input-group, .library-group {
    margin-bottom: 1.5rem;
}

.input-group label, .library-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: #555;
}

#url-input, #library-select {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #e1e5e9;
    border-radius: 8px;
    font-size: 16px;
    transition: all 0.3s ease;
}

#url-input:focus, #library-select:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

/* Input Mode Selection */
.input-mode-selection {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
    padding: 1rem;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e1e5e9;
}

.input-mode-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    font-weight: 600;
    color: #555;
    transition: color 0.3s ease;
}

.input-mode-label:hover {
    color: #667eea;
}

.input-mode-label input[type="radio"] {
    margin: 0;
    accent-color: #667eea;
}

/* File Input Styles */
.file-input-wrapper {
    position: relative;
    display: block;
}

#file-input {
    position: absolute;
    opacity: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
}

.file-input-display {
    display: flex;
    align-items: center;
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #e1e5e9;
    border-radius: 8px;
    background: white;
    cursor: pointer;
    transition: all 0.3s ease;
}

.file-input-display:hover {
    border-color: #667eea;
}

.file-input-text {
    flex: 1;
    color: #666;
    font-size: 16px;
}

.file-browse-btn {
    background: #667eea;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.3s ease;
}

.file-browse-btn:hover {
    background: #5a6fd8;
}

.file-info {
    margin-top: 0.5rem;
    padding: 0.5rem;
    background: #e8f4f8;
    border-radius: 6px;
    font-size: 14px;
    color: #2c5f69;
}

.file-name {
    font-weight: 600;
    margin-right: 1rem;
}

.file-size {
    color: #666;
    font-size: 13px;
}

/* Button Styles */
.optimize-button {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
    position: relative;
    overflow: hidden;
}

.optimize-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

.optimize-button:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none;
}

/* Quick Test Section */
.quick-test-section {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid #e1e5e9;
}

.quick-test-section label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: #555;
}

.quick-test-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.quick-test-btn {
    background: #f8f9fa;
    color: #333;
    border: 1px solid #e1e5e9;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.quick-test-btn:hover {
    background: #e9ecef;
    border-color: #667eea;
    color: #667eea;
    transform: translateY(-1px);
}

.btn-loader {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.spinner {
    width: 16px;
    height: 16px;
    border: 2px solid transparent;
    border-top: 2px solid white;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Status Section */
.status-section {
    margin-bottom: 2rem;
}

.status-message {
    padding: 12px 16px;
    border-radius: 8px;
    margin-bottom: 1rem;
    font-weight: 500;
    display: none;
}

.status-message.success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.status-message.error {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.status-message.info {
    background-color: #d1ecf1;
    color: #0c5460;
    border: 1px solid #bee5eb;
}

/* Content Section */
.content-section {
    margin-bottom: 2rem;
}

.content-panel {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    border: 1px solid #e1e5e9;
}

.panel-header {
    background: #f8f9fa;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #e1e5e9;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.panel-header h3 {
    color: #333;
    font-size: 1.2rem;
    font-weight: 600;
}

.panel-actions {
    display: flex;
    gap: 0.5rem;
}

.action-btn {
    background: #667eea;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.action-btn:hover {
    background: #5a6fd8;
    transform: translateY(-1px);
}

.content-container {
    height: 600px;
    position: relative;
}

.content-frame {
    width: 100%;
    height: 100%;
    border: none;
    background: white;
}

.library-info {
    padding: 1rem 1.5rem;
    background: #f8f9fa;
    border-top: 1px solid #e1e5e9;
    font-size: 14px;
    color: #666;
}

.library-info p {
    margin: 0;
}

.library-info strong {
    color: #333;
}

/* Features Section */
.features-section {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    margin-bottom: 2rem;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.features-section h3 {
    text-align: center;
    margin-bottom: 2rem;
    color: #333;
    font-size: 1.8rem;
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
}

.feature-card {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 8px;
    text-align: center;
    border: 1px solid #e1e5e9;
    transition: all 0.3s ease;
}

.feature-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.feature-card h4 {
    color: #667eea;
    margin-bottom: 0.5rem;
    font-size: 1.2rem;
}

.feature-card p {
    color: #666;
    font-size: 14px;
}

/* Footer */
.footer {
    text-align: center;
    padding: 2rem;
    color: #666;
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

/* Responsive Design */
@media (max-width: 768px) {
    .container {
        padding: 10px;
    }
    
    .header h1 {
        font-size: 2rem;
    }
    
    .header p {
        font-size: 1rem;
    }
    
    .content-container {
        height: 400px;
    }
    
    .content-container {
        height: 400px;
    }
    
    .features-grid {
        grid-template-columns: 1fr;
    }
    
    .panel-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .panel-actions {
        align-self: stretch;
        justify-content: space-between;
    }
}

/* Loading States */
.content-frame.loading {
    background: #f8f9fa;
    display: flex;
    align-items: center;
    justify-content: center;
}

.content-frame.loading::before {
    content: "Loading content...";
    color: #666;
    font-size: 16px;
}

/* Print Styles */
@media print {
    .url-input-section,
    .features-section,
    .footer {
        display: none;
    }
    
    .content-section {
        break-inside: avoid;
    }
    
    .content-panel {
        box-shadow: none;
        border: 1px solid #ccc;
    }
    
    .content-panel {
        box-shadow: none;
        border: 1px solid #ccc;
    }
    
    .content-frame {
        height: auto;
        min-height: 500px;
    }
}
class HTMLOptimizer {
    constructor() {
        this.urlInput = document.getElementById('url-input');
        this.fileInput = document.getElementById('file-input');
        this.urlInputGroup = document.getElementById('url-input-group');
        this.fileInputGroup = document.getElementById('file-input-group');
        this.inputModeRadios = document.querySelectorAll('input[name="input-mode"]');
        this.fileInputDisplay = document.querySelector('.file-input-display');
        this.fileInputText = document.querySelector('.file-input-text');
        this.fileInfo = document.getElementById('file-info');
        this.librarySelect = document.getElementById('library-select');
        this.additionalProcessingCheckbox = document.getElementById('additional-processing');
        this.optimizeBtn = document.getElementById('optimize-btn');
        this.statusMessage = document.getElementById('status-message');
        this.optimizedFrame = document.getElementById('optimized-frame');
        this.libraryDescription = document.getElementById('library-description');
        
        this.currentData = {
            originalContent: '',
            optimizedContent: '',
            url: '',
            library: '',
            inputMode: 'url',
            fileName: ''
        };
        
        this.initializeEventListeners();
        this.setupLibraryDescriptions();
        this.updateLibraryDescription(); // Show default description for Readability.js
    }

    initializeEventListeners() {
        // Input mode switching
        this.inputModeRadios.forEach(radio => {
            radio.addEventListener('change', (e) => {
                this.switchInputMode(e.target.value);
            });
        });
        
        // File input handling
        this.fileInput.addEventListener('change', (e) => {
            this.handleFileSelection(e.target.files[0]);
        });
        
        // File input display click
        this.fileInputDisplay.addEventListener('click', () => {
            this.fileInput.click();
        });
        
        // Main optimization button
        this.optimizeBtn.addEventListener('click', () => this.optimizeContent());
        
        // Enter key in URL input
        this.urlInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                this.optimizeContent();
            }
        });
        
        // Library selection change
        this.librarySelect.addEventListener('change', () => {
            this.updateLibraryDescription();
        });
        
        // Action buttons
        document.getElementById('copy-optimized').addEventListener('click', () => {
            this.copyContent('optimized');
        });
        
        document.getElementById('print-optimized').addEventListener('click', () => {
            this.printContent('optimized');
        });
        
        document.getElementById('download-optimized').addEventListener('click', () => {
            this.downloadContent();
        });
    }

    setupLibraryDescriptions() {
        this.libraryDescriptions = {
            'mozilla-readability': {
                name: 'Mozilla Readability',
                description: 'Official Mozilla Readability.js library used in Firefox Reader Mode. Industry-standard content extraction with enhanced image handling.',
                features: ['Firefox Reader Mode algorithm', 'Official Mozilla library', 'Enhanced image preservation', 'Professional content extraction']
            },
            'readability.js': {
                name: 'Readability.js',
                description: 'Content extraction algorithm similar to Firefox Reader Mode. Scores elements to find the main article content.',
                features: ['Article detection', 'Content scoring', 'Clean layout', 'Reading optimization']
            },
            'cheerio': {
                name: 'Cheerio',
                description: 'Server-side HTML parsing and manipulation. Removes ads, extracts main content, and optimizes for reading with clean typography.',
                features: ['Ad removal', 'Content extraction', 'Typography optimization', 'Image sizing']
            },
            'puppeteer': {
                name: 'Puppeteer',
                description: 'Browser automation with Chrome/Chromium. Renders the page completely and applies optimization styles dynamically.',
                features: ['Full page rendering', 'JavaScript execution', 'Dynamic content', 'Real browser environment']
            },
            'playwright': {
                name: 'Playwright',
                description: 'Cross-browser automation tool. Similar to Puppeteer but supports Chrome, Firefox, and Safari rendering engines.',
                features: ['Multi-browser support', 'Modern web apps', 'Dynamic styling', 'Enhanced compatibility']
            },
            'prettier': {
                name: 'Prettier',
                description: 'Code formatter that beautifies HTML structure while adding reading-optimized styles and print-friendly layout.',
                features: ['Code formatting', 'HTML beautification', 'Consistent structure', 'Print optimization']
            },
            'js-beautify': {
                name: 'JS-Beautify',
                description: 'HTML beautifier that formats code structure and applies reading-friendly styles with proper indentation.',
                features: ['HTML formatting', 'Code indentation', 'Structure cleanup', 'Style enhancement']
            },
            'domparser': {
                name: 'DOMParser & Web APIs',
                description: 'Native browser APIs for parsing and manipulating HTML. Lightweight approach with basic content cleaning.',
                features: ['Native web APIs', 'Lightweight processing', 'Attribute cleaning', 'Basic optimization']
            }
        };
    }

    updateLibraryDescription() {
        const selectedLibrary = this.librarySelect.value;
        
        if (!selectedLibrary) {
            this.libraryDescription.innerHTML = '<p>Select a library above to see optimized content</p>';
            return;
        }
        
        const desc = this.libraryDescriptions[selectedLibrary];
        if (desc) {
            this.libraryDescription.innerHTML = `
                <p><strong>${desc.name}</strong> - ${desc.description}</p>
                <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                    ${desc.features.map(feature => `<li>${feature}</li>`).join('')}
                </ul>
            `;
        }
    }

    switchInputMode(mode) {
        this.currentData.inputMode = mode;
        
        if (mode === 'url') {
            this.urlInputGroup.style.display = 'block';
            this.fileInputGroup.style.display = 'none';
            this.urlInput.required = true;
            this.fileInput.required = false;
        } else {
            this.urlInputGroup.style.display = 'none';
            this.fileInputGroup.style.display = 'block';
            this.urlInput.required = false;
            this.fileInput.required = true;
        }
        
        // Clear previous content
        this.clearContent();
    }

    handleFileSelection(file) {
        if (!file) {
            this.fileInputText.textContent = 'Choose HTML file...';
            this.fileInfo.style.display = 'none';
            this.currentData.fileName = '';
            return;
        }
        
        // Validate file type
        const validTypes = ['text/html', 'application/xhtml+xml', 'text/plain'];
        const validExtensions = ['.html', '.htm', '.xhtml'];
        const hasValidExtension = validExtensions.some(ext => 
            file.name.toLowerCase().endsWith(ext)
        );
        
        if (!validTypes.includes(file.type) && !hasValidExtension) {
            this.showStatus('Please select a valid HTML file (.html, .htm, .xhtml)', 'error');
            this.fileInput.value = '';
            return;
        }
        
        // Check file size (max 10MB)
        const maxSize = 10 * 1024 * 1024; // 10MB
        if (file.size > maxSize) {
            this.showStatus('File size too large. Please select a file smaller than 10MB.', 'error');
            this.fileInput.value = '';
            return;
        }
        
        // Update UI
        this.fileInputText.textContent = file.name;
        this.currentData.fileName = file.name;
        
        // Show file info
        const fileSize = this.formatFileSize(file.size);
        this.fileInfo.querySelector('.file-name').textContent = file.name;
        this.fileInfo.querySelector('.file-size').textContent = fileSize;
        this.fileInfo.style.display = 'block';
        
        this.showStatus(`File "${file.name}" selected successfully`, 'success');
    }

    formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    readFileContent(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            
            reader.onload = (e) => {
                resolve(e.target.result);
            };
            
            reader.onerror = () => {
                reject(new Error('Failed to read file'));
            };
            
            reader.readAsText(file, 'UTF-8');
        });
    }

    clearContent() {
        this.optimizedFrame.src = '';
        this.currentData.originalContent = '';
        this.currentData.optimizedContent = '';
        this.showStatus('', '');
    }

    async optimizeContent() {
        const library = this.librarySelect.value;
        const additionalProcessing = this.additionalProcessingCheckbox.checked;
        
        // Validation
        if (!library) {
            this.showStatus('Please select an optimization library', 'error');
            return;
        }
        
        let requestData;
        let url;
        
        if (this.currentData.inputMode === 'url') {
            url = this.urlInput.value.trim();
            
            if (!url) {
                this.showStatus('Please enter a valid URL', 'error');
                return;
            }
            
            // Validate URL format
            try {
                new URL(url);
            } catch (e) {
                this.showStatus('Please enter a valid URL (include http:// or https://)', 'error');
                return;
            }
            
            requestData = { url, library, additionalProcessing };
            
        } else {
            // File mode
            const file = this.fileInput.files[0];
            
            if (!file) {
                this.showStatus('Please select an HTML file', 'error');
                return;
            }
            
            // Read file content
            try {
                const fileContent = await this.readFileContent(file);
                requestData = { 
                    htmlContent: fileContent,
                    library,
                    fileName: file.name,
                    additionalProcessing
                };
                url = `Local file: ${file.name}`;
            } catch (error) {
                this.showStatus(`Error reading file: ${error.message}`, 'error');
                return;
            }
        }
        
        // Start optimization process
        this.setLoadingState(true);
        const processingMode = additionalProcessing ? 'with additional processing' : 'raw output';
        this.showStatus(`Optimizing ${url} with ${library} (${processingMode})...`, 'info');
        
        try {
            const endpoint = this.currentData.inputMode === 'url' ? '/api/optimize' : '/api/optimize-file';
            const response = await fetch(endpoint, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(requestData)
            });
            
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.error || 'Optimization failed');
            }
            
            const data = await response.json();
            
            if (data.success) {
                this.currentData = {
                    ...this.currentData, // Preserve existing properties like inputMode and fileName
                    originalContent: data.originalContent,
                    optimizedContent: data.optimizedContent,
                    url: data.url,
                    library: data.library
                };
                
                this.displayContent();
                this.showStatus(`Successfully optimized with ${library}`, 'success');
            } else {
                throw new Error(data.error || 'Unknown error occurred');
            }
            
        } catch (error) {
            console.error('Optimization error:', error);
            let errorMessage = error.message;
            
            // Provide helpful suggestions based on error type
            if (error.message.includes('redirect')) {
                errorMessage += '\n\nðŸ’¡ Suggestion: Try using Cheerio or Readability.js libraries which handle redirects better, or check if the URL redirects to a different domain.';
            } else if (error.message.includes('timeout')) {
                errorMessage += '\n\nðŸ’¡ Suggestion: The website might be slow. Try again or use a faster loading website for testing.';
            } else if (error.message.includes('Cannot reach')) {
                errorMessage += '\n\nðŸ’¡ Suggestion: Please verify the URL is correct and the website is online.';
            }
            
            this.showStatus(`Error: ${errorMessage}`, 'error');
        } finally {
            this.setLoadingState(false);
        }
    }

    displayContent() {
        // Display optimized content only
        const optimizedDoc = this.optimizedFrame.contentDocument || this.optimizedFrame.contentWindow.document;
        optimizedDoc.open();
        optimizedDoc.write(this.currentData.optimizedContent);
        optimizedDoc.close();
        
        // Update library description if not already shown
        if (this.librarySelect.value) {
            this.updateLibraryDescription();
        }
    }

    setLoadingState(loading) {
        const btnText = this.optimizeBtn.querySelector('.btn-text');
        const btnLoader = this.optimizeBtn.querySelector('.btn-loader');
        
        if (loading) {
            btnText.style.display = 'none';
            btnLoader.style.display = 'flex';
            this.optimizeBtn.disabled = true;
            
            // Add loading class to frame
            this.optimizedFrame.classList.add('loading');
        } else {
            btnText.style.display = 'block';
            btnLoader.style.display = 'none';
            this.optimizeBtn.disabled = false;
            
            // Remove loading class
            this.optimizedFrame.classList.remove('loading');
        }
    }

    showStatus(message, type) {
        this.statusMessage.textContent = message;
        this.statusMessage.className = `status-message ${type}`;
        this.statusMessage.style.display = 'block';
        
        // Auto-hide success and info messages
        if (type === 'success' || type === 'info') {
            setTimeout(() => {
                this.statusMessage.style.display = 'none';
            }, 5000);
        }
    }

    async copyContent(type) {
        const content = this.currentData.optimizedContent;
        
        if (!content) {
            this.showStatus('No content to copy', 'error');
            return;
        }
        
        try {
            await navigator.clipboard.writeText(content);
            this.showStatus('Optimized content copied to clipboard', 'success');
        } catch (error) {
            console.error('Copy failed:', error);
            this.showStatus('Failed to copy content', 'error');
        }
    }

    printContent(type) {
        const frame = this.optimizedFrame;
        
        if (!frame.contentWindow) {
            this.showStatus('No content to print', 'error');
            return;
        }
        
        try {
            frame.contentWindow.focus();
            frame.contentWindow.print();
        } catch (error) {
            console.error('Print failed:', error);
            this.showStatus('Failed to print content', 'error');
        }
    }

    downloadContent() {
        if (!this.currentData.optimizedContent) {
            this.showStatus('No optimized content to download', 'error');
            return;
        }
        
        try {
            const blob = new Blob([this.currentData.optimizedContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            
            // Generate filename from URL
            const urlObj = new URL(this.currentData.url);
            const filename = `optimized-${urlObj.hostname}-${this.currentData.library}-${Date.now()}.html`;
            
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            this.showStatus('Optimized content downloaded', 'success');
        } catch (error) {
            console.error('Download failed:', error);
            this.showStatus('Failed to download content', 'error');
        }
    }
}

// Initialize the application when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    new HTMLOptimizer();
    
    // Add some reliable test URLs
    const testUrls = [
        'http://localhost:3001/api/test-content',
        'http://localhost:3001/test.html',
        'https://httpbin.org/html',
        'https://example.com',
        'https://www.w3.org/TR/html52/'
    ];
    
    // Add placeholder with examples
    const urlInput = document.getElementById('url-input');
    urlInput.placeholder = 'https://example.com (try the test URLs below)';
    
    // Add quick test buttons
    const urlSection = document.querySelector('.url-input-section');
    const quickTestDiv = document.createElement('div');
    quickTestDiv.className = 'quick-test-section';
    quickTestDiv.innerHTML = `
        <label>Quick Test URLs:</label>
        <div class="quick-test-buttons">
            ${testUrls.map(url => `
                <button type="button" class="quick-test-btn" data-url="${url}">
                    ${url.includes('test-content') ? 'Rich Test Content' :
                      url.includes('localhost') ? 'Local Test' : 
                      url.includes('httpbin') ? 'HTTP Test' :
                      url.includes('example.com') ? 'Example.com' :
                      url.includes('w3.org') ? 'W3C Docs' : 'Other Test'}
                </button>
            `).join('')}
        </div>
    `;
    
    urlSection.appendChild(quickTestDiv);
    
    // Add event listeners for quick test buttons
    document.querySelectorAll('.quick-test-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const url = btn.dataset.url;
            document.getElementById('url-input').value = url;
        });
    });
    
    console.log('HTML Optimization Tool initialized');
    console.log('Supported libraries:', [
        'Cheerio', 'Readability.js', 'Puppeteer', 
        'Playwright', 'Prettier', 'JS-Beautify', 'DOMParser'
    ]);
    console.log('Quick test URLs available:', testUrls);
});
